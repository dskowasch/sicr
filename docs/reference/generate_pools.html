<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate pools to sample from — generate_pools • sicr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate pools to sample from — generate_pools"><meta name="description" content="Generate pools to sample from"><meta property="og:description" content="Generate pools to sample from"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sicr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/sicr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate pools to sample from</h1>

      <div class="d-none name"><code>generate_pools.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate pools to sample from</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_pools</span><span class="op">(</span></span>
<span>  <span class="va">extended_claims_data</span>,</span>
<span>  <span class="va">reserve_classes</span>,</span>
<span>  <span class="va">years_for_pools</span>,</span>
<span>  <span class="va">start_of_tail</span>,</span>
<span>  <span class="va">end_of_tail</span>,</span>
<span>  lower_outlier_limit <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>  upper_outlier_limit <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  <span class="va">pool_of_annuities</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-extended-claims-data">extended_claims_data<a class="anchor" aria-label="anchor" href="#arg-extended-claims-data"></a></dt>
<dd><p>Dataframe as output of <code><a href="prepare_data.html">prepare_data()</a></code>.</p></dd>


<dt id="arg-reserve-classes">reserve_classes<a class="anchor" aria-label="anchor" href="#arg-reserve-classes"></a></dt>
<dd><p>Numeric vector to specify reserve classes at the niveau of <code>index_year</code>, see details of <code><a href="prepare_data.html">prepare_data()</a></code>.</p></dd>


<dt id="arg-years-for-pools">years_for_pools<a class="anchor" aria-label="anchor" href="#arg-years-for-pools"></a></dt>
<dd><p>Vector containing the calendar years that shall be used to build the pools.</p></dd>


<dt id="arg-start-of-tail">start_of_tail<a class="anchor" aria-label="anchor" href="#arg-start-of-tail"></a></dt>
<dd><p>First year to be treated as a tail year.</p></dd>


<dt id="arg-end-of-tail">end_of_tail<a class="anchor" aria-label="anchor" href="#arg-end-of-tail"></a></dt>
<dd><p>Last development year.</p></dd>


<dt id="arg-lower-outlier-limit">lower_outlier_limit<a class="anchor" aria-label="anchor" href="#arg-lower-outlier-limit"></a></dt>
<dd><p>Numeric value to specify lower outlier limit at the niveau of <code>index_year</code> see details of <code><a href="prepare_data.html">prepare_data()</a></code>.
Lower payments will be set to lower_outlier_limit.</p></dd>


<dt id="arg-upper-outlier-limit">upper_outlier_limit<a class="anchor" aria-label="anchor" href="#arg-upper-outlier-limit"></a></dt>
<dd><p>Numeric value to specify upper outlier limit at the niveau of <code>index_year</code>, see details of <code><a href="prepare_data.html">prepare_data()</a></code>.
Higher payments will be set to upper_outlier_limit.</p></dd>


<dt id="arg-pool-of-annuities">pool_of_annuities<a class="anchor" aria-label="anchor" href="#arg-pool-of-annuities"></a></dt>
<dd><p>Pool of annuities that was used to generate <code>extended_claims_data</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of three objects, see details.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function returns a list of three objects:</p><ol><li><p><strong>pretail pools</strong> <br>
This is a list containing one list per reserve class which contain one dataframe per development year. These dataframes
are the pools of historic claims from which to sample if a newer claim has the corresponding development year and reserve class.
It consists of the following columns:</p><ul><li><p><code>Ind_cl_payment_cal</code> is the indexed calendar year payment.</p></li>
<li><p><code>Exit_reserve_class</code> is the "new" reserve class after the year.</p></li>
<li><p><code>New_annuity_1</code> to <code>New_annuity_5</code> are the indices of new annuities in the dataframe <code>pool_of_annuities</code>.</p></li>
<li><p><code>Ind_entry_cl_reserve</code> is the entry claim reserve which is only used for analysing purposes, for example to identify special claims.</p></li>
</ul></li>
<li><p><strong>tail pools</strong> <br>
This is a list containing one dataframe per class. No distinction is made between development years except in the indexed
calendar year payments. These are raised to the niveau of the first tail year. The columns are the same as in 1.</p></li>
<li><p><strong>pool of annuities</strong> <br>
As the first two lists refer to the index in this pool, it has to be attached to enable sampling.</p></li>
</ol><p>Note that in the pools list the first reserve class is always reserve class 0 and the first development year is always development year 2!</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># this example uses data provided with this package</span></span></span>
<span class="r-in"><span><span class="va">extended_claims_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="prepare_data.html">prepare_data</a></span><span class="op">(</span>claims_data <span class="op">=</span> <span class="va">minimal_claims_data_xmpl</span>,</span></span>
<span class="r-in"><span>                                     indices <span class="op">=</span> <span class="va">indices_xmpl</span>,</span></span>
<span class="r-in"><span>                                     threshold <span class="op">=</span> <span class="fl">400000</span>,</span></span>
<span class="r-in"><span>                                     first_orig_year <span class="op">=</span> <span class="fl">1989</span>,</span></span>
<span class="r-in"><span>                                     last_orig_year <span class="op">=</span> <span class="fl">2023</span>,</span></span>
<span class="r-in"><span>                                     expected_year_of_growing_large <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                                     reserve_classes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">200001</span>, <span class="fl">400001</span>, <span class="fl">700001</span>, <span class="fl">1400001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     pool_of_annuities <span class="op">=</span> <span class="va">minimal_pool_of_annuities_xmpl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pools</span> <span class="op">&lt;-</span> <span class="fu">generate_pools</span><span class="op">(</span>extended_claims_data <span class="op">=</span> <span class="va">extended_claims_data</span>,</span></span>
<span class="r-in"><span>                        reserve_classes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">200001</span>, <span class="fl">400001</span>, <span class="fl">700001</span>, <span class="fl">1400001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        years_for_pools <span class="op">=</span> <span class="fl">2014</span><span class="op">:</span><span class="fl">2023</span>,</span></span>
<span class="r-in"><span>                        start_of_tail <span class="op">=</span> <span class="fl">17</span>,</span></span>
<span class="r-in"><span>                        end_of_tail <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>                        lower_outlier_limit <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span></span>
<span class="r-in"><span>                        upper_outlier_limit <span class="op">=</span> <span class="cn">Inf</span>,</span></span>
<span class="r-in"><span>                        pool_of_annuities <span class="op">=</span> <span class="va">minimal_pool_of_annuities_xmpl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># pretail pools reserve class 0 and development year 2</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pools</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Ind_cl_payment_cal Exit_reserve_class New_annuity_1 New_annuity_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                  0                  0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   New_annuity_3 New_annuity_4 New_annuity_5 Ind_entry_cl_reserve</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             0             0             0                    0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># tail pools reserve class 2</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pools</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Ind_cl_payment_cal Exit_reserve_class New_annuity_1 New_annuity_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 160             0.0000                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 161             0.0000                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 162             0.0000                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 163        143126.8123                  1             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 229         45648.6240                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 230             0.0000                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 231             0.0000                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 232             0.0000                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 233             0.0000                  1             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 414             0.0000                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 415           174.7804                  2             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     New_annuity_3 New_annuity_4 New_annuity_5 Ind_entry_cl_reserve</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 160             0             0             0             282441.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 161             0             0             0             279903.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 162             0             0             0             278470.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 163             0             0             0             277107.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 229             0             0             0             284702.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 230             0             0             0             246531.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 231             0             0             0             245270.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 232             0             0             0             244069.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 233             0             0             0             240440.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 414             0             0             0             286951.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 415             0             0             0             268498.4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># pool of annuities</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pools</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Claim_id Annuity_id Origin_year Calendar_year Entering_year Annuity_start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Claim#43          1        2006          2009          2009          2009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Claim#51          1        2010          2013          2013          2036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Claim#13          2        1990          2009          2009          2009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Claim#22          1        1996          2004          2004          2004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Claim#22          2        1996          2004          2004          2016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Annuity_end Birth_year Gender Annual_payment Dynamic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           0       1939      m      12168.214       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        2051       1986      m      12892.997       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        2012       1988      w       7094.071       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        2016       1960      m       5645.357       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        2025       1960      m      41642.501       0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dirk Skowasch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

