<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Helper function to create a matrix with indices per claim stemming from reinsurance treaty clause — generate_xl_indices_per_claim • sicr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Helper function to create a matrix with indices per claim stemming from reinsurance treaty clause — generate_xl_indices_per_claim"><meta name="description" content="This helper function converts the dataframes reinsurance and indices into a matrix with
one row per claim and one column for each past year from first_orig_year to last_orig_year and
for 250 future calendar years.
This matrix will be used to properly calculate the reinsurance payments."><meta property="og:description" content="This helper function converts the dataframes reinsurance and indices into a matrix with
one row per claim and one column for each past year from first_orig_year to last_orig_year and
for 250 future calendar years.
This matrix will be used to properly calculate the reinsurance payments."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sicr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/sicr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Helper function to create a matrix with indices per claim stemming from reinsurance treaty clause</h1>

      <div class="d-none name"><code>generate_xl_indices_per_claim.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This helper function converts the dataframes <code>reinsurance</code> and <code>indices</code> into a matrix with
one row per claim and one column for each past year from <code>first_orig_year</code> to <code>last_orig_year</code> and
for 250 future calendar years. <br>
This matrix will be used to properly calculate the reinsurance payments.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_xl_indices_per_claim</span><span class="op">(</span></span>
<span>  <span class="va">claims_list</span>,</span>
<span>  <span class="va">reinsurance</span>,</span>
<span>  <span class="va">indices</span>,</span>
<span>  <span class="va">first_orig_year</span>,</span>
<span>  <span class="va">last_orig_year</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-claims-list">claims_list<a class="anchor" aria-label="anchor" href="#arg-claims-list"></a></dt>
<dd><p>dataframe of claims generated with <code><a href="generate_claims_list.html">generate_claims_list()</a></code>.</p></dd>


<dt id="arg-reinsurance">reinsurance<a class="anchor" aria-label="anchor" href="#arg-reinsurance"></a></dt>
<dd><p>dataframe of reinsurance structures, see details of <code><a href="xl_cashflow.html">xl_cashflow()</a></code>.</p></dd>


<dt id="arg-indices">indices<a class="anchor" aria-label="anchor" href="#arg-indices"></a></dt>
<dd><p>dataframe for indexation, see details of <code><a href="prepare_data.html">prepare_data()</a></code>.</p></dd>


<dt id="arg-first-orig-year">first_orig_year<a class="anchor" aria-label="anchor" href="#arg-first-orig-year"></a></dt>
<dd><p>integer value for the first origin year, will be treated as the first observed calendar year.</p></dd>


<dt id="arg-last-orig-year">last_orig_year<a class="anchor" aria-label="anchor" href="#arg-last-orig-year"></a></dt>
<dd><p>integer value for the last origin year which will also be treated as the last calendar year,
usually the calendar year that just ended.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>numeric matrix with one row per claim and one column for each past and 250 future calendar years. Entries
for years before the claim origin year are set to 1. The other entries are indexation factors.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># this example uses data provided with this package</span></span></span>
<span class="r-in"><span><span class="co"># Create large claims list</span></span></span>
<span class="r-in"><span><span class="va">extended_claims_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="prepare_data.html">prepare_data</a></span><span class="op">(</span>claims_data <span class="op">=</span> <span class="va">minimal_claims_data_xmpl</span>,</span></span>
<span class="r-in"><span>                                     indices <span class="op">=</span> <span class="va">indices_xmpl</span>,</span></span>
<span class="r-in"><span>                                     threshold <span class="op">=</span> <span class="fl">400000</span>,</span></span>
<span class="r-in"><span>                                     first_orig_year <span class="op">=</span> <span class="fl">1989</span>,</span></span>
<span class="r-in"><span>                                     last_orig_year <span class="op">=</span> <span class="fl">2023</span>,</span></span>
<span class="r-in"><span>                                     expected_year_of_growing_large <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                                     reserve_classes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">200001</span>, <span class="fl">400001</span>, <span class="fl">700001</span>, <span class="fl">1400001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     pool_of_annuities <span class="op">=</span> <span class="va">minimal_pool_of_annuities_xmpl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">large_claims_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_claims_list.html">generate_claims_list</a></span><span class="op">(</span>extended_claims_data <span class="op">=</span> <span class="va">extended_claims_data</span>,</span></span>
<span class="r-in"><span>                                          first_orig_year <span class="op">=</span> <span class="fl">1989</span>,</span></span>
<span class="r-in"><span>                                          last_orig_year <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">reinsurance_xmpl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Origin_year Priority   Limit Base_year Margin_type Margin Quota_share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1989   500000 1500000      1988         FIC    0.0         0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         1990   500000 1500000      1988         FIC    0.0         0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         1991   500000 1500000      1988         FIC    0.0         0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         1992   500000 1500000      1988         FIC    0.0         0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         1993   500000 1500000      1988         FIC    0.0         0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         1994        0       0         0        none    0.0         0.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         1995        0       0         0        none    0.0         0.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         1996        0       0         0        none    0.0         0.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         1997        0       0         0        none    0.0         0.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        1998        0       0         0        none    0.0         0.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        1999  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        2000  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        2001  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        2002  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        2003  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16        2004  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17        2005  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18        2006  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19        2007  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20        2008  1000000 3000000      1998         APK    0.1         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21        2009  1000000 3000000      1998         SIC    0.3         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22        2010  1000000 3000000      1998         SIC    0.3         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23        2011  1000000 3000000      1998         SIC    0.3         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24        2012  1000000 3000000      1998         SIC    0.3         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25        2013  1000000 3000000      1998         SIC    0.3         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26        2014  1000000 3000000      1998         SIC    0.3         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27        2015  1000000 3000000      1998         SIC    0.2         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28        2016  1000000 3000000      1998         SIC    0.2         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29        2017  1000000 3000000      1998         SIC    0.2         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30        2018  1000000 3000000      1998         SIC    0.2         0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31        2019  1500000 3500000      2019         SIC    0.2         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32        2020  1500000 3500000      2019         SIC    0.2         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33        2021  1500000 3500000      2019         SIC    0.2         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34        2022  1500000 3500000      2019         SIC    0.2         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35        2023  1500000 3500000      2019         SIC    0.2         0.2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show only first 20 columns</span></span></span>
<span class="r-in"><span><span class="fu">generate_xl_indices_per_claim</span><span class="op">(</span>claims_list <span class="op">=</span> <span class="va">large_claims_list</span>,</span></span>
<span class="r-in"><span>                              reinsurance <span class="op">=</span> <span class="va">reinsurance_xmpl</span>,</span></span>
<span class="r-in"><span>                              indices <span class="op">=</span> <span class="va">indices_xmpl</span>,</span></span>
<span class="r-in"><span>                              first_orig_year <span class="op">=</span> <span class="fl">1989</span>,</span></span>
<span class="r-in"><span>                              last_orig_year <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              1989     1990    1991     1992    1993     1994     1995     1996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#10 1.040901 1.068969 1.11223 1.168475 1.22076 1.253636 1.275025 1.293509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#13 1.040901 1.068969 1.11223 1.168475 1.22076 1.253636 1.275025 1.293509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#16 1.040901 1.068969 1.11223 1.168475 1.22076 1.253636 1.275025 1.293509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#22 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#32 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#37 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#41 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#43 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#44 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#45 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#49 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#51 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#52 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#60 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#68 1.000000 1.000000 1.00000 1.000000 1.00000 1.000000 1.000000 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              1997    1998   1999     2000    2001     2002     2003    2004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#10 1.318595 1.33061 1.3384 1.357676 1.38461 1.404283 1.418807 1.44244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#13 1.318595 1.33061 1.3384 1.357676 1.38461 1.404283 1.418807 1.44244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#16 1.318595 1.33061 1.3384 1.357676 1.38461 1.404283 1.418807 1.44244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#22 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#32 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#37 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#41 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#43 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#44 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#45 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#49 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#51 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#52 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#60 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#68 1.000000 1.00000 1.0000 1.000000 1.00000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              2005     2006     2007    2008</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#10 1.464753 1.487859 1.522055 1.56206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#13 1.464753 1.487859 1.522055 1.56206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#16 1.464753 1.487859 1.522055 1.56206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#22 1.000000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#32 1.110844 1.128367 1.154301 1.18464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#37 1.110844 1.128367 1.154301 1.18464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#41 1.110844 1.128367 1.154301 1.18464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#43 1.110844 1.128367 1.154301 1.18464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#44 1.110844 1.128367 1.154301 1.18464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#45 1.110844 1.128367 1.154301 1.18464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#49 1.000000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#51 1.000000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#52 1.000000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#60 1.000000 1.000000 1.000000 1.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Claim#68 1.000000 1.000000 1.000000 1.00000</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dirk Skowasch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

