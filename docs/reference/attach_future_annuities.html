<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Attach future annuities to extended_claims_data — attach_future_annuities • sicr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Attach future annuities to extended_claims_data — attach_future_annuities"><meta name="description" content="The columns New_annuity_1 to New_annuity_5 are added to the dataframe. If new annuities have been agreed on
in the calendar year and the claim of the row, these columns contain the row number of these annuities in the corresponding
dataframe pool_of_annuities. These columns are needed for the pool as the sampling shall consider claim payments and
new reserve classes as well as new annuities.
The function always adds five columns for new annuities which is sufficient for the rare case that five new annuities are agreed on
for one single claim in one calendar year. Each further new annuity in one year will be ignored, which could lead to a slight underestimation
of the best estimate. To avoid this, data may be manually adjusted, for example by moving further annuities to another calendar year or
by aggregating annuities.
This function resembles only step 7 of the data preparation process, see description in details of prepare_data()"><meta property="og:description" content="The columns New_annuity_1 to New_annuity_5 are added to the dataframe. If new annuities have been agreed on
in the calendar year and the claim of the row, these columns contain the row number of these annuities in the corresponding
dataframe pool_of_annuities. These columns are needed for the pool as the sampling shall consider claim payments and
new reserve classes as well as new annuities.
The function always adds five columns for new annuities which is sufficient for the rare case that five new annuities are agreed on
for one single claim in one calendar year. Each further new annuity in one year will be ignored, which could lead to a slight underestimation
of the best estimate. To avoid this, data may be manually adjusted, for example by moving further annuities to another calendar year or
by aggregating annuities.
This function resembles only step 7 of the data preparation process, see description in details of prepare_data()"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sicr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/sicr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Attach future annuities to extended_claims_data</h1>

      <div class="d-none name"><code>attach_future_annuities.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The columns <code>New_annuity_1</code> to <code>New_annuity_5</code> are added to the dataframe. If new annuities have been agreed on
in the calendar year and the claim of the row, these columns contain the row number of these annuities in the corresponding
dataframe <code>pool_of_annuities</code>. These columns are needed for the pool as the sampling shall consider claim payments and
new reserve classes as well as new annuities. <br><br></p>
<p>The function always adds <strong>five</strong> columns for new annuities which is sufficient for the rare case that five new annuities are agreed on
for one single claim in one calendar year. Each further new annuity in one year will be ignored, which could lead to a slight underestimation
of the best estimate. To avoid this, data may be manually adjusted, for example by moving further annuities to another calendar year or
by aggregating annuities. <br><br></p>
<p><strong>This function resembles only step 7 of the data preparation process, see description in details of <code><a href="prepare_data.html">prepare_data()</a></code></strong></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">attach_future_annuities</span><span class="op">(</span><span class="va">extended_claims_data</span>, pool_of_annuities <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-extended-claims-data">extended_claims_data<a class="anchor" aria-label="anchor" href="#arg-extended-claims-data"></a></dt>
<dd><p>dataframe after step 6, see details of <code><a href="prepare_data.html">prepare_data()</a></code>.</p></dd>


<dt id="arg-pool-of-annuities">pool_of_annuities<a class="anchor" aria-label="anchor" href="#arg-pool-of-annuities"></a></dt>
<dd><p>dataframe containing one row for each annuity that has ever been agreed on, see details of <code><a href="prepare_data.html">prepare_data()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>prepared dataframe</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># this example uses data provided with this package</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="va">minimal_claims_data_xmpl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="reduce_data.html">reduce_data</a></span><span class="op">(</span><span class="va">indices_xmpl</span>, <span class="fl">400000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="add_missing_years.html">add_missing_years</a></span><span class="op">(</span><span class="fl">2023</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="add_columns.html">add_columns</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="add_indexed_columns.html">add_indexed_columns</a></span><span class="op">(</span><span class="va">indices_xmpl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="filter_large_claims.html">filter_large_claims</a></span><span class="op">(</span><span class="fl">400000</span>, <span class="fl">1989</span>, <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="add_classes.html">add_classes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">200001</span>, <span class="fl">400001</span>, <span class="fl">700001</span>, <span class="fl">1400001</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>   <span class="fu">attach_future_annuities</span><span class="op">(</span><span class="va">minimal_pool_of_annuities_xmpl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">new_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Claim_id Origin_year Calendar_year Cl_payment_cal Cl_reserve An_payment_cal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Claim#1        1976          1976              0          0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  Claim#1        1976          1977              0          0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Claim#1        1976          1978              0          0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Claim#1        1976          1979              0          0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Claim#1        1976          1980              0          0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Claim#1        1976          1981              0          0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   An_reserve Development_year Payment_cal Reserve Cl_payment_cum An_payment_cum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          0                1           0       0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0                2           0       0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0                3           0       0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          0                4           0       0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0                5           0       0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0                6           0       0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Payment_cum Cl_incurred An_incurred Incurred Entry_cl_reserve</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           0           0           0        0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           0           0           0        0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           0           0           0        0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           0           0           0        0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           0           0           0        0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           0           0           0        0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Entry_an_reserve Entry_reserve Ind_cl_payment_cal Ind_an_payment_cal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                0             0                  0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                0             0                  0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                0             0                  0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                0             0                  0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                0             0                  0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                0             0                  0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Ind_payment_cal Ind_cl_reserve Ind_an_reserve Ind_entry_cl_reserve</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               0              0              0                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               0              0              0                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               0              0              0                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               0              0              0                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5               0              0              0                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6               0              0              0                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Ind_entry_an_reserve Ind_entry_reserve Ind_reserve Ind_cl_payment_cum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                    0                 0           0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                    0                 0           0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                    0                 0           0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                    0                 0           0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                    0                 0           0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                    0                 0           0                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Ind_an_payment_cum Ind_payment_cum Ind_cl_incurred Ind_an_incurred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                  0               0               0               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                  0               0               0               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                  0               0               0               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                  0               0               0               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                  0               0               0               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                  0               0               0               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Ind_incurred Large_since Dev_year_of_growing_large Dev_year_since_large</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            0        1978                         3                   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            0        1978                         3                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            0        1978                         3                    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            0        1978                         3                    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            0        1978                         3                    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            0        1978                         3                    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Entry_reserve_class Exit_reserve_class New_annuity_1 New_annuity_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                   0                  0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                   0                  0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                   0                  0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                   0                  0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                   0                  0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                   0                  0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   New_annuity_3 New_annuity_4 New_annuity_5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2             0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3             0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4             0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5             0             0             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6             0             0             0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dirk Skowasch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

